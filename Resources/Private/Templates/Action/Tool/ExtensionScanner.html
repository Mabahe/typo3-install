<f:layout name="ToolAuthenticated"/>

<f:section name="Content">
	<div style="display:none;">
		<div id="t3js-extensionscanner-files-token">{extensionScannerFilesToken}</div>
		<div id="t3js-extensionscanner-scan-file-token">{extensionScannerScanFileToken}</div>
		<div id="t3js-extensionscanner-mark-fully-scanned-rest-files-token">{extensionScannerMarkFullyScannedRestFilesToken}</div>
		<div id="t3js-extensionscanner-file-hit-template">
			<div class="panel panel-flat t3js-extensionscanner-hit-panel risk-medium">
				<div class="panel-heading">
					<h3 class="panel-title">
						<a href="#collapse" class="collapsed t3js-extensionscanner-hit-file-panel-head" data-toggle="collapse">
							<span class="caret"></span>
							<span class="pull-right badges"></span>
							<span class="t3js-extensionscanner-hit-filename file">aFile</span>
							<span class="t3js-extensionscanner-hit-message message">aMessage</span>
						</a>
					</h3>
				</div>
				<div id="collapse" class="panel-collapse collapse t3js-extensionscanner-hit-file-panel-body">
					<div class="panel-body">
						<pre><strong class="t3js-extensionscanner-hit-file-line"></strong><span class="t3js-extensionscanner-hit-file-lineContent"></span></pre>
						<div class="panel-group-flat t3js-extensionscanner-hit-file-rest-container"></div>
					</div>
				</div>
			</div>
		</div>
		<div id="t3js-extensionscanner-file-hit-rest-template">
			<div class="panel panel-flat t3js-extensionscanner-hit-rest-panel risk-medium">
				<div class="panel-heading">
					<h3 class="panel-title">
						<a href="#collapse-rest"
							class="collapsed t3js-extensionscanner-hit-rest-panel-head"
							 data-toggle="collapse"
						>
							<span class="badge pull-right">aBadge</span>
							<span class="caret"></span>
							<strong class="t3js-extensionscanner-hit-rest-headline">restFileHeadline</strong>
						</a>
					</h3>
				</div>
				<div id="collapse-rest" class="panel-collapse collapse t3js-extensionscanner-hit-rest-panel-body">
					<pre class="t3js-extensionscanner-hit-rest-body">restFileContent</pre>
				</div>
			</div>
		</div>
	</div>

	<h1>Extension scanner</h1>

	<p>
		This module scans extensions for usage of deprecated and removed TYPO3 API calls.
		The module can be a great help for extension developers and site maintainers when
		upgrading to new core versions. However, the detection approach - based on static
		code analysis - is limited by concept: false positives/negatives are impossible to avoid.
		Further details can be found at
		<a style="text-decoration: underline;" target="_blank" rel="noopener" href="https://docs.typo3.org/typo3cms/CoreApiReference/ExtensionScanner/Index.html">
			the official docs.
		</a>
	</p>

	<div class="progress t3js-progress-all-extension">
		<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;">
			<span class="text-nowrap"></span>
		</div>
	</div>

	<button class="btn btn-default t3js-extensionscanner-scan-all" type="submit">
		Scan all
	</button>

	<h2>Extensions</h2>

	<div class="panel-group panel-group-flat panel-group-scanner-extensions">
		<f:for each="{extensionsInTypo3conf}" as="extensionInTypo3conf" iteration="iterator">
			<div
				class="panel panel-flat t3js-extensionscanner-extension t3js-extensionscanner-extension-{extensionInTypo3conf.filename}"
				data-extension="{extensionInTypo3conf.filename}">
				<div class="panel-progress">
					<div class="panel-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;"><span class="sr-only"></span></div>
				</div>
				<div class="panel-heading alert-notice">
					<h2 class="panel-title">
						<a href="#extension-{iterator.index}" class="collapsed" data-toggle="collapse">
							<span class="caret"></span>
							Extension: <strong>{extensionInTypo3conf.filename}</strong>
							<span class="pull-right t3js-extensionscanner-number-of-files"></span>
						</a>
					</h2>
				</div>
				<div class="panel-collapse collapse" id="extension-{iterator.index}">
					<div class="panel-body hide t3js-extensionscanner-extension-body"></div>
					<div class="panel-footer">
						<div>Effective lines of code: <span class="t3js-extensionscanner-extension-body-loc">0</span></div>
						<div>Files ignored by scanner: <span class="t3js-extensionscanner-extension-body-ignored-files">0</span></div>
						<div>Code lines ignored by scanner: <span class="t3js-extensionscanner-extension-body-ignored-lines">0</span></div>
						<button class="btn btn-default t3js-extensionscanner-scan-single" data-extension="{extensionInTypo3conf.filename}" type="submit">
							Scanning...
						</button>
					</div>
				</div>
			</div>
		</f:for>
	</div>
</f:section>
